# سند تعریف پروژه (PRD): پیش‌بینی دیابت با یادگیری ماشین
**عنوان درس:** نرم‌افزار ریاضی | **زبان برنامه‌نویسی:** MATLAB | **موضوع:** پزشکی/تشخیص بیماری

---

## ۱. مقدمه و تعریف مسئله (Introduction)
در دنیای پزشکی، تشخیص زودهنگام بیماری‌ها می‌تواند جان انسان‌ها را نجات دهد. این پروژه با هدف طراحی یک سیستم هوشمند (Machine Learning) برای پیش‌بینی احتمال ابتلای افراد به بیماری **دیابت** انجام می‌شود. ما از داده‌های تاریخی بیماران استفاده می‌کنیم تا الگویی برای تشخیص بیماری در بیماران جدید پیدا کنیم.

### هدف اصلی (Objective)
ایجاد یک مدل طبقه‌بندی (Classification) که بتواند با دریافت پارامترهای فیزیولوژیکی (مثل قند خون، فشار خون و...) تشخیص دهد آیا فرد دیابت دارد (1) یا سالم است (0).

---

## ۲. معرفی داده‌ها (Dataset Overview)
*   **نام دیتاست:** Pima Indians Diabetes Database
*   **منبع:** UCI Machine Learning Repository / Kaggle
*   **تعداد نمونه‌ها:** ۷۶۸ بیمار
*   **تعداد ویژگی‌ها (Features):** ۸ ویژگی ورودی + ۱ متغیر هدف

### ویژگی‌های ورودی (Inputs):
1.  **Pregnancies:** تعداد دفعات بارداری
2.  **Glucose:** غلظت گلوکز پلاسما (قند خون)
3. **BloodPressure:** فشار خون دیاستولیک (mm Hg)
4. **SkinThickness:** ضخامت چین پوستی سه سر (mm)
5.  **Insulin:** انسولین سرم
6.  **BMI:** شاخص توده بدنی
7.  **DiabetesPedigree:** تابع وراثت دیابت (سابقه خانوادگی)
8.  **Age:** سن (سال)

### متغیر هدف (Output/Target):
*   **Outcome:** کلاس باینری (۰: سالم / ۱: دیابتی)

---

## ۳. نقشه راه فنی و مراحل اجرا (Technical Roadmap)

ما پروژه را در **۵ فاز اصلی** پیاده‌سازی می‌کنیم:

### فاز ۱: آماده‌سازی محیط و داده‌ها (Setup & Ingestion)
*   ایجاد ساختار پوشه‌بندی پروژه.
*   بارگذاری فایل `csv` در محیط MATLAB با استفاده از `load_data.m`.
*   تخصیص نام صحیح به ستون‌ها (Header): `Pregnancies`, `Glucose`, `BloodPressure`, `SkinThickness`, `Insulin`, `BMI`, `DiabetesPedigree`, `Age`, `Outcome`.
*   بررسی اولیه داده‌ها (نمایش خلاصه آماری و ابعاد داده‌ها).

### فاز ۲: تحلیل اکتشافی داده‌ها (EDA - Exploratory Data Analysis)
*هدف: فهمیدن توزیع داده‌ها قبل از مدل‌سازی.*
*   **بررسی آماری:** نمایش خلاصه آماری داده‌ها با تابع `summary` در `analyze_data.m`.
*   **بصری‌سازی (Visualization):** رسم چندین نوع نمودار در `analyze_data.m`:
    *   **هیستوگرام (Histograms):** برای دیدن توزیع هر ویژگی در زیر نمودار توزیع ویژگی‌ها
    *   **ماتریس همبستگی (Correlation Matrix):** برای فهمیدن رابطه ویژگی‌ها با بیماری با استفاده از تابع `heatmap` و `corr`، نشان می‌دهد که `Glucose` با ضریب ۰.۴۷ بیشترین همبستگی را دارد
    *   **Boxplot:** برای شناسایی داده‌های پرت و مقایسه توزیع ویژگی‌ها، نشان می‌دهد که `Insulin` و `Glucose` دارای تعداد زیادی داده پرت هستند
    *   **Boxplotهای جداگانه:** برای هر ویژگی به صورت مجزا

### فاز ۳: پیش‌پردازش داده‌ها (Data Preprocessing)
*این مهم‌ترین بخش برای افزایش دقت مدل است.*
*   **انتخاب ویژگی (Feature Selection):** بر اساس نتایج ماتریس همبستگی، حذف ویژگی‌های ضعیف `BloodPressure` و `SkinThickness` که همبستگی پایینی (حدود ۰.۰۷) با `Outcome` دارند
*   **پاکسازی (Cleaning):** شناسایی مقادیر نامعتبر (صفرهای نامعتبر در `Glucose`, `Insulin`, `BMI`) و تبدیل آن‌ها به `NaN` در `preprocess.m`، سپس استفاده از **میانه (Median)** به جای میانگین برای جایگزینی مقادیر نامعتبر (چون BoxPlot نشان داده که داده‌های پرت زیادی وجود دارند و میانه مقاوم‌تر است)
*   **نرمال‌سازی (Normalization):** استفاده از روش **Z-Score** (استانداردسازی) برای هم‌وزن کردن ویژگی‌ها و جلوگیری از تأثیر مقیاس‌های مختلف بر مدل
*   **تقسیم داده‌ها (Splitting):** تقسیم دیتاست به دو بخش با استفاده از `cvpartition` و Seed قابل تکرار (`rng(42)`):
    *   ۷۰٪ برای آموزش (Train Set)
    *   ۳۰٪ برای آزمون (Test Set)

### فاز ۴: مدل‌سازی و مقایسه (Modeling & Comparison)
ما ۵ الگوریتم مختلف را تست و مقایسه می‌کنیم تا بهترین را انتخاب کنیم در `compare_models.m`:
1.  **K-Nearest Neighbors (KNN):** با ۵ همسایه نزدیک
2. **Decision Tree:** با حداقل سایز برگ ۵
3.  **Naive Bayes (NB):** برای مقایسه عملکرد
4.  **Support Vector Machine (SVM):** با کرنل خطی و استانداردسازی
5.  **Ensemble (Random Forest):** برای عملکرد پیشرفته
*   هر مدل با دقت درصدی ارزیابی می‌شود و مدل با بیشترین دقت انتخاب می‌شود

### فاز ۵: ارزیابی تخصصی (Advanced Evaluation)
*   ارزیابی مدل انتخاب شده با معیارهای پیشرفته در `evaluate_model.m`:
*   **معیارهای ارزیابی:** دقت کل (Accuracy)، حساسیت (Recall)، ویژگی (Specificity)، دقت (Precision)، امتیاز F1 (F1-Score)
*   **ماتریس تشخیص (Confusion Matrix):** نمایش جزئیات TP، TN، FP، FN و توانایی تشخیص بیماران
*   **منحنی ROC:** نمایش عملکرد مدل در آستانه‌های مختلف و محاسبه AUC (مساحت زیر منحنی)
*   **نکته مهم پزشکی:** تأکید بر کاهش False Negative (FN) که بیماران را سالم تشخیص می‌دهد و خطرناک است

---

## ۴. ابزارها و نیازمندی‌ها (Tools)
*   **نرم‌افزار:** MATLAB (نسخه ۲۰۱۸ به بالا توصیه می‌شود).
*   **تولباکس‌های مورد نیاز:** Statistics and Machine Learning Toolbox (معمولاً پیش‌فرض نصب است).

---

## ۵. خروجی نهایی پروژه (Deliverables)
1.  **سورس کد متلب (`main.m`):** کد تمیز و کامنت‌گذاری شده شامل تمام مراحل بالا.
2.  **گزارش نموداری:** تصاویر ذخیره شده از هیستوگرام‌ها، ماتریس همبستگی و ماتریس خطا.
3.  **فایل دیتاست:** نسخه خام و نسخه تمیز شده (Cleaned).

---
*تاریخ ایجاد سند: دسامبر ۲۰۲۵*