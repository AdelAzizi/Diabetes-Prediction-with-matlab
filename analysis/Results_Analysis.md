# تحلیل فنی عملکرد سیستم تشخیص دیابت
**تاریخ اجرا:** دسامبر ۲۰۲۵
**مدل نهایی:** Optimized Ensemble (Bagged Trees)

---

## ۱. خلاصه عملکرد (Executive Summary)
سیستم طراحی شده با استفاده از الگوریتم یادگیری گروهی (Ensemble) و پس از طی مراحل پیش‌پردازش هوشمند و بهینه‌سازی پارامترها، به **دقت نهایی ۷۸.۷۰٪** دست یافت. شاخص **AUC برابر با 0.84** نشان‌دهنده پایداری و قابلیت اطمینان بالای مدل در تفکیک افراد بیمار از سالم است.

---

## ۲. تحلیل شاخص‌های کلیدی (Metrics Analysis)

| معیار (Metric) | مقدار | تفسیر فنی |
| :--- | :--- | :--- |
| **Accuracy (دقت کل)** | **78.70%** | از هر ۱۰۰ نفر، مدل وضعیت ۷۹ نفر را به درستی تشخیص می‌دهد. این عدد برای دیتاست پزشکی Pima بسیار مطلوب است. |
| **AUC (سطح زیر نمودار)** | **0.84** | عملکرد مدل "بسیار خوب" ارزیابی می‌شود. این عدد نشان می‌دهد مدل صرفاً شانسی عمل نمی‌کند و قدرت تفکیک بالایی دارد. |
| **Specificity (ویژگی)** | **86.67%** | نقطه قوت اصلی مدل. سیستم با دقت بسیار بالایی (۸۶٪) افراد سالم را شناسایی می‌کند و به ندرت به فرد سالم برچسب بیمار می‌زند (نرخ هشدار غلط پایین). |
| **Precision (اطمینان)** | **71.83%** | وقتی سیستم هشداری می‌دهد که "فرد بیمار است"، تا ۷۲٪ می‌توان به این هشدار اعتماد کرد. |
| **Recall (حساسیت)** | **63.75%** | نقطه ضعف نسبی مدل. سیستم توانسته ۶۴٪ از کل بیماران را شناسایی کند، اما حدود ۳۶٪ از بیماران از دید سیستم مخفی مانده‌اند. |

---

## ۳. تحلیل ماتریس خطا (Confusion Matrix Insight)

<p align="center">
  <img src="../results/Confusion Matrix.jpg" alt="Confusion Matrix" width="400">
</p>

بر اساس داده‌های تست (۲۳۰ نفر):
*   **تشخیص‌های درست (Success):**
    *   **۱۳۰ نفر سالم:** به درستی سالم تشخیص داده شدند.
    *   **۵۱ نفر بیمار:** به درستی بیمار تشخیص داده شدند.
    *   *مجموع موفقیت:* ۱۸۱ نفر.

*   **تشخیص‌های نادرست (Errors):**
    *   **۲۰ نفر سالم (FP):** به اشتباه بیمار تشخیص داده شدند (استرس بی‌مورد به بیمار، اما خطر جانی ندارد).
    *   **۲۹ نفر بیمار (FN):** به اشتباه سالم تشخیص داده شدند (خطای نوع دوم).
    *   *تحلیل خطر:* این ۲۹ نفر کسانی هستند که دیابت دارند اما سیستم به آن‌ها گفته سالم هستید. در کاربردهای بالینی واقعی، این عدد باید با استفاده از روش‌هایی مثل تغییر آستانه تصمیم‌گیری (Threshold Moving) کاهش یابد.

**تحلیل بصری ماتریس:**
نمودار بالا به صورت بصری نشان می‌دهد که:
*   رنگ سبز تیره در خانه‌های (سالم→سالم) و (بیمار→بیمار) نشان‌دهنده تشخیص‌های درست است.
*   رنگ قرمز در خانه‌های (سالم→بیمار) و (بیمار→سالم) نشان‌دهنده خطاها است.
*   درصدهای نمایش داده شده در هر خانه، نسبت تشخیص‌های درست/نادرست را در هر کلاس نشان می‌دهد.

---

## ۴. تحلیل منحنی ROC (ROC Curve Analysis)

<p align="center">
  <img src="../results/ROC Curve.jpg" alt="ROC Curve" width="400">
</p>

منحنی ROC (Receiver Operating Characteristic) عملکرد مدل را در آستانه‌های مختلف تصمیم‌گیری نشان می‌دهد.

**تحلیل بصری منحنی:**
*   **خط آبی (منحنی مدل):** هرچه این خط به گوشه بالا-چپ نزدیک‌تر باشد، عملکرد مدل بهتر است.
*   **خط نقطه‌چین مشکی (Random Guess):** نشان‌دهنده عملکرد تصادفی (مثل پرتاب سکه) است. مدل ما به وضوح بهتر از این عمل می‌کند.
*   **AUC = 0.84:** مساحت زیر منحنی برابر با 0.84 است که نشان می‌دهد:
    *   عملکرد مدل **"بسیار خوب"** ارزیابی می‌شود (AUC > 0.8).
    *   مدل قدرت تفکیک بالایی دارد و می‌تواند به خوبی بین بیمار و سالم تمایز قائل شود.
    *   این عدد نشان می‌دهد که مدل صرفاً شانسی عمل نمی‌کند و الگوهای واقعی را یاد گرفته است.

**نکته مهم:**
اگر بخواهیم Recall (حساسیت) را افزایش دهیم و تعداد False Negative را کاهش دهیم، می‌توانیم آستانه تصمیم‌گیری را تغییر دهیم. با حرکت روی منحنی به سمت راست، می‌توانیم بیماران بیشتری را شناسایی کنیم، اما در عوض False Positive هم افزایش می‌یابد.

---

## ۵. مسیر بهبود (Evolution of Accuracy)
پروژه طی سه مرحله به بلوغ رسید:
1.  **مدل پایه (KNN ساده):** دقت **۷۲.۲٪** (همراه با خطاهای زیاد).
2.  **مدل هوشمند (Ensemble):** دقت **۷۶.۹٪** (پس از انتخاب ویژگی و اصلاح داده‌های پرت).
3.  **مدل بهینه (Optimized Ensemble):** دقت **۷۸.۷٪** (پس از تنظیم دقیق پارامترها).

## ۶. نتیجه‌گیری نهایی
این سیستم به عنوان یک ابزار **"کمک‌تشخیصی" (Assistant)** عملکرد قابل قبولی دارد. با توجه به **Specificity بالا**، می‌توان از آن برای غربالگری اولیه استفاده کرد، اما به دلیل وجود خطای منفی کاذب (False Negative)، تایید نهایی پزشک برای افرادی که سیستم آن‌ها را "سالم" اعلام کرده اما علائم مشکوک دارند، الزامی است.