# ุชูุถุญ ูุงู `evaluate_model.m`

ุงู ุชุงุจุน ูุณุฆูู **ุงุฑุฒุงุจ ุฏูู ู ุชุฎุตุต ูุฏู** ุงุณุช.  
ูู ุชููุง ุฏูุช (Accuracy) ุฑุง ูุญุงุณุจู ูโฺฉูุฏุ ุจูฺฉู ูุนุงุฑูุง ูพุฒุดฺฉ ููู ูุซู Recallุ Precisionุ Specificity ู F1-Score ุฑุง ูู ุญุณุงุจ ูโฺฉูุฏ ู ูููุฏุงุฑูุง ุชุฎุตุต ูุซู ROC Curve ู Confusion Matrix ุฑุง ุฑุณู ูโฺฉูุฏ.

---

## ูุฑูุฏ ู ุฎุฑูุฌ

- **ูุฑูุฏโูุง:**
  - `model`: ูุฏู ุขููุฒุด ุฏุฏู (ูุซูุงู ุงุฒ `fitcknn` ุง `fitctree`)
  - `X_test`: ุฏุงุฏูโูุง ุชุณุช (ูฺฺฏโูุง)
  - `Y_test`: ุจุฑฺุณุจโูุง ูุงูุน ุชุณุช (ุฌูุงุจ ุฏุฑุณุช)
- **ุฎุฑูุฌ:**  
  - ุฎุฑูุฌ ูุณุชูู (ูุชุบุฑ) ุจุฑููโฺฏุฑุฏุงูุฏุ ุงูุง ูุชุงุฌ ุฑุง ุฏุฑ ูพูุฌุฑู ฺฉุงููุฏ ููุงุด ูโุฏูุฏ ู ูููุฏุงุฑูุง ุฑุง ุฑุณู ูโฺฉูุฏ.

---

## ูุฑุญููโุจูโูุฑุญูู ฺู ฺฉุงุฑ ูโฺฉูุฏุ

### ฑ. ูพุดโุจู
ูุฏู ุฑู ุฏุงุฏูโูุง ุชุณุช ูพุดโุจู ูโฺฉูุฏ ู ูู ฺฉูุงุณ (ฐ ุง ฑ) ู ูู ุงุญุชูุงู (Score) ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.

### ฒ. ูุญุงุณุจู ูุงุชุฑุณ ุฎุทุง (Confusion Matrix)
ุงุฒ ุฑู ูพุดโุจูโูุง ู ุฌูุงุจโูุง ูุงูุนุ ฺฉ ูุงุชุฑุณ ฒรฒ ุณุงุฎุชู ูโุดูุฏ ฺฉู ูโฺฏูุฏ:
- ฺูุฏ ุชุง ุณุงูู ุฏุฑุณุช ุชุดุฎุต ุฏุงุฏู ุดุฏ (TN)
- ฺูุฏ ุชุง ุณุงูู ุงุดุชุจุงู ุชุดุฎุต ุฏุงุฏู ุดุฏ (FP)
- ฺูุฏ ุชุง ุจูุงุฑ ุงุดุชุจุงู ุชุดุฎุต ุฏุงุฏู ุดุฏ (FN)
- ฺูุฏ ุชุง ุจูุงุฑ ุฏุฑุณุช ุชุดุฎุต ุฏุงุฏู ุดุฏ (TP)

### ณ. ูุญุงุณุจู ูุนุงุฑูุง ูุฎุชูู
- **Accuracy**: ุฏูุช ฺฉู
- **Recall**: ูุฏุฑุช ฺฉุดู ุจูุงุฑุงู
- **Precision**: ููุช ูโฺฏูุฏ ุจูุงุฑ ุงุณุชุ ฺูุฏุฑ ุงุญุชูุงู ุฏุงุฑุฏ ูุงูุนุงู ุจูุงุฑ ุจุงุดุฏ
- **Specificity**: ูุฏุฑุช ุชุดุฎุต ุณุงููโูุง
- **F1-Score**: ูุงูฺฏู ูุงุฑูููฺฉ Precision ู Recall

### ด. ููุงุด ฺฏุฒุงุฑุด ูุชู
ููู ูุนุงุฑูุง ุจู ุตูุฑุช ุฌุฏูู ุฏุฑ ูพูุฌุฑู ฺฉุงููุฏ ููุงุด ุฏุงุฏู ูโุดููุฏ.

### ต. ุฑุณู ูููุฏุงุฑูุง
- **Confusion Matrix**: ูุงุชุฑุณ ุฎุทุง ุจู ุตูุฑุช ุจุตุฑ
- **ROC Curve**: ูููุฏุงุฑ ุนููฺฉุฑุฏ ูุฏู ุฏุฑ ุขุณุชุงููโูุง ูุฎุชูู

---

## ุชูุถุญ ุฎุท ุจู ุฎุท ฺฉุฏ

```matlab
function evaluate_model(model, X_test, Y_test)
```
**ุฎุท ฑ:** ุชุนุฑู ุชุงุจุน. ุณู ูุฑูุฏ ูโฺฏุฑุฏ ู ุฎุฑูุฌ ุจุฑููโฺฏุฑุฏุงูุฏ.

```matlab
    % EVALUATE_MODEL ุงุฑุฒุงุจ ุชุฎุตุต ุจุง ูุนุงุฑูุง ูพุฒุดฺฉ ู ูููุฏุงุฑ ROC
    
    disp(' ');
    disp('-----------------------------------------');
    disp('๐ ูุฑุญูู ณ: ุงุฑุฒุงุจ ูู ู ุชุฎุตุต (Technical Evaluation)');
    disp('-----------------------------------------');
```
**ุฎุท ฒ-ท:** ฺฉุงููุช ุชูุถุญ ู ููุงุด ุนููุงู ูุฑุญูู.

```matlab
    %% ฑ. ูพุดโุจู (ูู ฺฉูุงุณ ู ูู ุงุญุชูุงู)
    % ูุฏูโูุง ูพุดุฑูุชู ุนูุงูู ุจุฑ ฐ ู ฑุ ุฏุฑุตุฏ ุงุทููุงู (Score) ูู ูโุฏููุฏ
    [Y_pred, scores] = predict(model, X_test);
```
**ุฎุท น-ฑฑ:** 
- `predict` ูุฏู ุฑุง ุฑู ุฏุงุฏูโูุง ุชุณุช ุงุฌุฑุง ูโฺฉูุฏ.
- `Y_pred` ูพุดโุจู ฺฉูุงุณโูุง ุงุณุช (ฐ ุง ฑ).
- `scores` ุงุญุชูุงู ุชุนูู ุจู ูุฑ ฺฉูุงุณ ุงุณุช (ูุซูุงู [0.3, 0.7] ุนู ณฐูช ุงุญุชูุงู ุณุงูู ู ทฐูช ุงุญุชูุงู ุจูุงุฑ).

```matlab
    %% ฒ. ุงุณุชุฎุฑุงุฌ ุงุนุฏุงุฏ ูุงุชุฑุณ ุฎุทุง
    cm = confusionmat(Y_test, Y_pred);
```
**ุฎุท ฑณ-ฑด:** 
- `confusionmat` ูุงุชุฑุณ ุฎุทุง ุฑุง ูุญุงุณุจู ูโฺฉูุฏ.
- `cm` ฺฉ ูุงุชุฑุณ ฒรฒ ุงุณุช.

```matlab
    % ฺุฏูุงู ูุงุชุฑุณ ุฏุฑ ูุชูุจ:
    % [TN  FP]
    % [FN  TP]
    TN = cm(1,1); % ุณุงูู ุฏุฑุณุช
    FP = cm(1,2); % ุณุงูู ุงุดุชุจุงู (ูุดุฏุงุฑ ุบูุท)
    FN = cm(2,1); % ุจูุงุฑ ุงุดุชุจุงู (ุฎุทุฑูุงฺฉ!)
    TP = cm(2,2); % ุจูุงุฑ ุฏุฑุณุช
```
**ุฎุท ฑต-ฒฐ:** 
- ฺฉุงููุช ุชูุถุญ ูโุฏูุฏ ฺฉู ูุงุชุฑุณ ฺุทูุฑ ฺุฏู ุดุฏู ุงุณุช.
- `TN` (True Negative): ุณุงูู ุฏุฑุณุช ุชุดุฎุต ุฏุงุฏู ุดุฏ.
- `FP` (False Positive): ุณุงูู ุงุดุชุจุงู ุชุดุฎุต ุฏุงุฏู ุดุฏ (ูุดุฏุงุฑ ุบูุท).
- `FN` (False Negative): ุจูุงุฑ ุงุดุชุจุงู ุชุดุฎุต ุฏุงุฏู ุดุฏ (ุฎุทุฑูุงฺฉ! ฺูู ุจูุงุฑ ุฑุง ุณุงูู ุชุดุฎุต ุฏุงุฏู).
- `TP` (True Positive): ุจูุงุฑ ุฏุฑุณุช ุชุดุฎุต ุฏุงุฏู ุดุฏ.

```matlab
    %% ณ. ูุญุงุณุจุงุช ุฑุงุถ (Formulas)
    
    % ุงูู) ุฏูุช ฺฉู (Accuracy): ฺูุฏุฑ ฺฉูุงู ุฏุฑุณุช ฺฏูุชูุ
    accuracy = (TP + TN) / sum(cm(:));
```
**ุฎุท ฒฒ-ฒถ:** 
- `accuracy` ุฏูุช ฺฉู ุฑุง ูุญุงุณุจู ูโฺฉูุฏ.
- ูุฑููู: (ุฏุฑุณุชโูุง) / (ฺฉู)
- `sum(cm(:))` ุนู ุฌูุน ููู ุนูุงุตุฑ ูุงุชุฑุณ (ฺฉู ูพุดโุจูโูุง).

```matlab
    % ุจ) ุญุณุงุณุช ุง ูุฑุงุฎูุงู (Recall / Sensitivity): ุงุฒ ุจู ุจูุงุฑุงูุ ฺูุฏ ุชุง ุฑู ฺฏุฑูุชูุ
    % ูุฑููู: TP / (TP + FN)
    recall = TP / (TP + FN);
```
**ุฎุท ฒธ-ณฐ:** 
- `recall` ูุฏุฑุช ฺฉุดู ุจูุงุฑุงู ุฑุง ูโุณูุฌุฏ.
- ูุฑููู: (ุจูุงุฑุงู ุฏุฑุณุช) / (ฺฉู ุจูุงุฑุงู ูุงูุน)
- ูุฑฺู ุจุงูุงุชุฑ ุจุงุดุฏ ุจูุชุฑ ุงุณุช (ุนู ุจูุงุฑุงู ุจุดุชุฑ ุฑุง ูพุฏุง ฺฉุฑุฏู).

```matlab
    % ุฌ) ุฏูุชู ูพุดโุจู ูุซุจุช (Precision): ููุช ูฺฏู ูุฑุถูุ ฺูุฏุฑ ุงุญุชูุงู ุฏุงุฑู ูุงูุนุงู ูุฑุถ ุจุงุดูุ
    % ูุฑููู: TP / (TP + FP)
    precision = TP / (TP + FP);
```
**ุฎุท ณฒ-ณด:** 
- `precision` ุฏูุช ูพุดโุจู ูุซุจุช ุฑุง ูโุณูุฌุฏ.
- ูุฑููู: (ุจูุงุฑุงู ุฏุฑุณุช) / (ฺฉู ูพุดโุจูโูุง ูุซุจุช)
- ุนู ููุช ูโฺฏูู ุจูุงุฑ ุงุณุชุ ฺูุฏ ุฏุฑุตุฏ ูุงูุนุงู ุจูุงุฑ ุงุณุช.

```matlab
    % ุฏ) ูฺฺฏ (Specificity): ุชูุงูุง ุชุดุฎุต ุณุงููโูุง
    % ูุฑููู: TN / (TN + FP)
    specificity = TN / (TN + FP);
```
**ุฎุท ณถ-ณธ:** 
- `specificity` ูุฏุฑุช ุชุดุฎุต ุณุงููโูุง ุฑุง ูโุณูุฌุฏ.
- ูุฑููู: (ุณุงููโูุง ุฏุฑุณุช) / (ฺฉู ุณุงููโูุง ูุงูุน)

```matlab
    % ูู) ูุนุงุฑ F1-Score: ูุงูฺฏู ูุงุฑูููฺฉ ุจู Precision ู Recall
    % (ุจูุชุฑู ูุนุงุฑ ููุช ุฏุงุฏูโูุง ูุงูุชูุงุฒู ูุณุชูุฏ)
    f1_score = 2 * (precision * recall) / (precision + recall);
```
**ุฎุท ดฐ-ดฒ:** 
- `f1_score` ูุงูฺฏู ูุงุฑูููฺฉ Precision ู Recall ุงุณุช.
- ุงู ูุนุงุฑ ููุช ุฏุงุฏูโูุง ูุงูุชูุงุฒู ูุณุชูุฏ (ูุซู ุฏุชุงุณุช ูุง ฺฉู ถตูช ุณุงูู ู ณตูช ุจูุงุฑ ุฏุงุฑุฏ) ุจูุชุฑ ุงุฒ Accuracy ุงุณุช.

```matlab
    %% ด. ููุงุด ฺฏุฒุงุฑุด ูุชู
    fprintf('%-25s | %-10s\n', 'Metric', 'Value');
    disp('---------------------------------------');
```
**ุฎุท ดด-ดถ:** 
- ฺฉ ุฌุฏูู ุจุง ุฏู ุณุชูู ูโุณุงุฒุฏ: "Metric" ู "Value".
- `%-25s` ุนู ฺฉ ุฑุดุชู ุจุง ุนุฑุถ ฒต ฺฉุงุฑุงฺฉุชุฑ ู ุชุฑุงุฒ ฺูพ.

```matlab
    fprintf('%-25s | %.2f%%\n', 'Accuracy (ุฏูุช ฺฉู)', accuracy * 100);
    fprintf('%-25s | %.2f%%\n', 'Recall (ูุฏุฑุช ฺฉุดู ุจูุงุฑ)', recall * 100);
    fprintf('%-25s | %.2f%%\n', 'Specificity (ุชุดุฎุต ุณุงูู)', specificity * 100);
    fprintf('%-25s | %.2f%%\n', 'Precision (ุงุทููุงู)', precision * 100);
    fprintf('%-25s | %.2f%%\n', 'F1-Score (ุงูุชุงุฒ ูู)', f1_score * 100);
```
**ุฎุท ดท-ตฑ:** 
- ูุฑ ุฎุท ฺฉ ูุนุงุฑ ุฑุง ููุงุด ูโุฏูุฏ.
- `%.2f%%` ุนู ุนุฏุฏ ุจุง ุฏู ุฑูู ุงุนุดุงุฑ ู ุนูุงูุช ุฏุฑุตุฏ.

```matlab
    disp('---------------------------------------');
    fprintf('โ๏ธ ุฎุทุง ููุน ุฏูู (False Negative): %d ุจูุงุฑ ุชุดุฎุต ุฏุงุฏู ูุดุฏูุฏ.\n', FN);
```
**ุฎุท ตฒ-ตณ:** 
- ฺฉ ุฎุท ุฌุฏุงฺฉููุฏู ู ูุดุฏุงุฑ ุฏุฑุจุงุฑู `FN`.
- `FN` ุฎุทุฑูุงฺฉ ุงุณุช ฺูู ุจูุงุฑ ุฑุง ุณุงูู ุชุดุฎุต ุฏุงุฏู.

```matlab
    %% ต. ุฑุณู ูููุฏุงุฑ ROC (Receiver Operating Characteristic)
    % ุงู ูููุฏุงุฑ ูุดุงูโุฏููุฏู ุนููฺฉุฑุฏ ูุฏู ุฏุฑ ุขุณุชุงููโูุง ูุฎุชูู ุงุณุช
    % ูุฑฺูุฏุฑ ุฎุท ุขุจ ุจู ฺฏูุดู ุจุงูุง-ฺูพ ูุฒุฏฺฉโุชุฑ ุจุงุดุฏุ ูุฏู ุจูุชุฑ ุงุณุช.
    
    % ูุญุงุณุจู ููุงุท ูููุฏุงุฑ
    [Xroc, Yroc, ~, AUC] = perfcurve(Y_test, scores(:,2), 1);
```
**ุฎุท ตต-ถฐ:** 
- `perfcurve` ููุงุท ูููุฏุงุฑ ROC ุฑุง ูุญุงุณุจู ูโฺฉูุฏ.
- `Y_test` ุจุฑฺุณุจโูุง ูุงูุน.
- `scores(:,2)` ุงุญุชูุงู ุชุนูู ุจู ฺฉูุงุณ ฑ (ุจูุงุฑ).
- `1` ุนู ฺฉูุงุณ ูุซุจุช (ุจูุงุฑ).
- `AUC` (Area Under Curve) ูุณุงุญุช ุฒุฑ ููุญู ุงุณุช (ูุฑฺู ุจุงูุงุชุฑ ุจูุชุฑุ ุญุฏุงฺฉุซุฑ ฑ).

```matlab
    figure('Name', 'Evaluation Plots', 'Color', 'w', 'Position', [100, 100, 1000, 500]);
```
**ุฎุท ถฒ:** ฺฉ ูพูุฌุฑู ุจุฒุฑฺฏ ุจุฑุง ูููุฏุงุฑูุง ูโุณุงุฒุฏ (ุนุฑุถ ฑฐฐฐ ู ุงุฑุชูุงุน ตฐฐ ูพฺฉุณู).

```matlab
    % ูููุฏุงุฑ ุณูุช ฺูพ: Confusion Matrix
    subplot(1, 2, 1);
```
**ุฎุท ถด-ถต:** ฺฉ ุดุจฺฉู ฑรฒ ูโุณุงุฒุฏ ู ูููุฏุงุฑ ุงูู ุฑุง ุฏุฑ ุณูุช ฺูพ ูุฑุงุฑ ูโุฏูุฏ.

```matlab
    confusionchart(Y_test, Y_pred, ...
        'Title', ['Confusion Matrix (Acc: ' num2str(accuracy*100, '%.1f') '%)'], ...
        'RowSummary', 'row-normalized');
```
**ุฎุท ถถ-ถธ:** 
- `confusionchart` ูุงุชุฑุณ ุฎุทุง ุฑุง ุจู ุตูุฑุช ุจุตุฑ ุฑุณู ูโฺฉูุฏ.
- ุนููุงู ุดุงูู ุฏูุช ูุฏู ุงุณุช.
- `'RowSummary', 'row-normalized'` ุฏุฑุตุฏูุง ุฑุง ุฏุฑ ูุฑ ุณุทุฑ ููุงุด ูโุฏูุฏ.

```matlab
    % ูููุฏุงุฑ ุณูุช ุฑุงุณุช: ROC Curve
    subplot(1, 2, 2);
```
**ุฎุท ทฐ-ทฑ:** ูููุฏุงุฑ ุฏูู ุฑุง ุฏุฑ ุณูุช ุฑุงุณุช ูุฑุงุฑ ูโุฏูุฏ.

```matlab
    plot(Xroc, Yroc, 'LineWidth', 2.5, 'Color', [0, 0.4470, 0.7410]);
```
**ุฎุท ทฒ:** ููุญู ROC ุฑุง ุจุง ุฎุท ุถุฎู ู ุฑูฺฏ ุขุจ ุฑุณู ูโฺฉูุฏ.

```matlab
    hold on;
```
**ุฎุท ทณ:** `hold on` ุนู ูููุฏุงุฑ ุจุนุฏ ุฑู ููู ูููุฏุงุฑ ุฑุณู ุดูุฏ (ูู ุฏุฑ ูพูุฌุฑู ุฌุฏุฏ).

```matlab
    plot([0, 1], [0, 1], '--k'); % ุฎุท ุชุตุงุฏู (ุดุฑ ุง ุฎุท)
```
**ุฎุท ทด:** ฺฉ ุฎุท ููุทูโฺู ุงุฒ (ฐ,ฐ) ุจู (ฑ,ฑ) ุฑุณู ูโฺฉูุฏ ฺฉู ูุดุงูโุฏููุฏู ุนููฺฉุฑุฏ ุชุตุงุฏู ุงุณุช (ูุซู ูพุฑุชุงุจ ุณฺฉู).

```matlab
    xlabel('False Positive Rate (1 - Specificity)');
    ylabel('True Positive Rate (Sensitivity)');
```
**ุฎุท ทต-ทถ:** ุจุฑฺุณุจ ูุญูุฑูุง ุฑุง ุชูุธู ูโฺฉูุฏ.

```matlab
    title(['ROC Curve (AUC = ' num2str(AUC, '%.2f') ')']);
```
**ุฎุท ทท:** ุนููุงู ูููุฏุงุฑ ุฑุง ุจุง ููุฏุงุฑ AUC ุชูุธู ูโฺฉูุฏ.

```matlab
    grid on;
```
**ุฎุท ทธ:** ุดุจฺฉู ุฎุทูุท ุฑุง ูุนุงู ูโฺฉูุฏ.

```matlab
    legend(['AUC: ' num2str(AUC, '%.2f')], 'Random Guess', 'Location', 'SouthEast');
```
**ุฎุท ทน:** ุฑุงูููุง ูููุฏุงุฑ ุฑุง ุงุถุงูู ูโฺฉูุฏ.

```matlab
    disp('โ ูููุฏุงุฑูุง ุชุฎุตุต (ROC ู Confusion Matrix) ุฑุณู ุดุฏูุฏ.');
```
**ุฎุท ธฑ:** ูพุบุงู ููููุช.

```matlab
end
```
**ุฎุท ธฒ:** ูพุงุงู ุชุงุจุน.

---

## ฺุฑุง ุงู ูุนุงุฑูุง ููู ูุณุชูุฏุ

ุฏุฑ ูพุฒุดฺฉุ ููู ูุนุงุฑูุง ููู ูุณุชูุฏ:

- **Accuracy** ุฎูุจ ุงุณุช ุงูุง ฺฉุงู ูุณุช (ูุซูุงู ุงฺฏุฑ ููู ุฑุง ุณุงูู ุชุดุฎุต ุฏููุ ุจุงุฒ ูู ถตูช ุฏูุช ุฏุงุฑู!).
- **Recall** ููู ุงุณุช ฺูู ููโุฎูุงูู ุจูุงุฑ ุฑุง ุงุฒ ุฏุณุช ุจุฏูู.
- **Precision** ููู ุงุณุช ฺูู ููโุฎูุงูู ุจู ุงูุฑุงุฏ ุณุงูู ุจฺฏูู ุจูุงุฑ ูุณุชูุฏ.
- **F1-Score** ุชุนุงุฏู ุจู ุงู ุฏู ุฑุง ูโุณูุฌุฏ.
- **ROC Curve** ูุดุงู ูโุฏูุฏ ูุฏู ุฏุฑ ุขุณุชุงููโูุง ูุฎุชูู ฺูุฏุฑ ุฎูุจ ุนูู ูโฺฉูุฏ.

